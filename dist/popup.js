(()=>{"use strict";var e={913:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(d,a){function c(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?d(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(c,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=t.setDefault=void 0;const d=o(473);function a(){return n(this,void 0,void 0,(function*(){yield chrome.storage.sync.clear(),yield chrome.storage.sync.set({useDesktopNotification:!0,useDiscordNotification:!1,discordWebhookUrl:"",discordMention:"",startPlaybackWhenOpenPage:!1,useAutoNext:!0,useAutoNextContainsSupplements:!1,useAutoNextNotGoodOnly:!0,useAutoPauseUnblock:!0,useSeekUnblock:!0,notifyVideoStateChange:!1,discordPlaybackStartedMessage:"%mention% 教材動画 `%title%` の再生を開始しました",discordPlaybackEndedMessage:"%mention% 教材動画 `%title%` の再生が終了しました",discordTakeTestMessage:"%mention% テスト `%title%` を受けてください",desktopPlaybackStarted:"教材動画の再生を開始しました",desktopPlaybackEnded:"教材動画の再生が終了しました",desktopTakeTest:"テストを受けてください",unknownVideo:"不明な動画",unknownTest:"不明なテスト"}),(0,d.log)("Config",d.Level.INFO,"Configuration initialized.")}))}t.setDefault=a,t.initialize=function(){return n(this,void 0,void 0,(function*(){0==(yield chrome.storage.sync.getBytesInUse())&&((0,d.log)("Popup",d.Level.INFO,"Configuration not found, writing default configuration."),yield a())}))}},473:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.log=t.ASCIIColor=t.Level=void 0,t.Level={INFO:"INFO",WARN:"WARN",ERROR:"ERROR",DEBUG:"DEBUG"},t.ASCIIColor={BLACK:"[30m",GRAY:"[90m",DARK_RED:"[31m",RED:"[91m",DARK_GREEN:"[32m",GREEN:"[92m",DARK_YELLOW:"[33m",YELLOW:"[93m",DARK_BLUE:"[34m",BLUE:"[94m",DARK_PURPLE:"[35m",PURPLE:"[95m",DARK_AQUA:"[36m",AQUA:"[96m",DARK_WHITE:"[37m",WHITE:"[97m",RESET:"[0m"},t.log=function(e,o,n){let d=o==t.Level.INFO?t.ASCIIColor.WHITE:o==t.Level.WARN?t.ASCIIColor.DARK_YELLOW:o==t.Level.ERROR?t.ASCIIColor.DARK_RED:t.ASCIIColor.GRAY;console.log(d+"["+new Intl.DateTimeFormat("ja-JP",{timeStyle:"medium"}).format(new Date)+"] ["+e+"] ["+o+"] "+n+t.ASCIIColor.RESET)}}},t={};function o(n){var d=t[n];if(void 0!==d)return d.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}(()=>{const e=o(473),t=o(913);function n(){chrome.storage.sync.get(null,(t=>{const o=t;document.getElementById("start-playback-when-open-page").checked=o.startPlaybackWhenOpenPage,document.getElementById("use-auto-next").checked=o.useAutoNext,document.getElementById("use-auto-next-contains-supplements").checked=o.useAutoNextContainsSupplements,document.getElementById("use-auto-next-not-good-only").checked=o.useAutoNextNotGoodOnly,document.getElementById("use-auto-pause-unblock").checked=o.useAutoPauseUnblock,document.getElementById("use-seek-unblock").checked=o.useSeekUnblock,document.getElementById("notify-video-state-change").checked=o.notifyVideoStateChange,document.getElementById("notify-desktop").checked=o.useDesktopNotification,document.getElementById("notify-discord").checked=o.useDiscordNotification,document.getElementById("discord-webhook-url").value=o.discordWebhookUrl,document.getElementById("discord-mention").value=o.discordMention,document.getElementById("discord-playback-started-message").value=o.discordPlaybackStartedMessage,document.getElementById("discord-playback-ended-message").value=o.discordPlaybackEndedMessage,document.getElementById("discord-take-test-message").value=o.discordTakeTestMessage,document.getElementById("desktop-playback-started").value=o.desktopPlaybackStarted,document.getElementById("desktop-playback-ended").value=o.desktopPlaybackEnded,document.getElementById("desktop-take-test").value=o.desktopTakeTest,document.getElementById("unknown-video").value=o.unknownVideo,document.getElementById("unknown-test").value=o.unknownTest,(0,e.log)("Popup",e.Level.INFO,"Configuration loaded.")}))}window.onload=()=>{(0,t.initialize)().then((()=>{(0,e.log)("Popup",e.Level.INFO,"Initialize completed, loading configuration."),n(),document.querySelectorAll("input").forEach((t=>{t.addEventListener("input",(()=>{!function(){const t={startPlaybackWhenOpenPage:document.getElementById("start-playback-when-open-page").checked,useAutoNext:document.getElementById("use-auto-next").checked,useAutoNextContainsSupplements:document.getElementById("use-auto-next-contains-supplements").checked,useAutoNextNotGoodOnly:document.getElementById("use-auto-next-not-good-only").checked,useAutoPauseUnblock:document.getElementById("use-auto-pause-unblock").checked,useSeekUnblock:document.getElementById("use-seek-unblock").checked,notifyVideoStateChange:document.getElementById("notify-video-state-change").checked,useDesktopNotification:document.getElementById("notify-desktop").checked,useDiscordNotification:document.getElementById("notify-discord").checked,discordWebhookUrl:document.getElementById("discord-webhook-url").value,discordMention:document.getElementById("discord-mention").value,discordPlaybackStartedMessage:document.getElementById("discord-playback-started-message").value,discordPlaybackEndedMessage:document.getElementById("discord-playback-ended-message").value,discordTakeTestMessage:document.getElementById("discord-take-test-message").value,desktopPlaybackStarted:document.getElementById("desktop-playback-started").value,desktopPlaybackEnded:document.getElementById("desktop-playback-ended").value,desktopTakeTest:document.getElementById("desktop-take-test").value,unknownVideo:document.getElementById("unknown-video").value,unknownTest:document.getElementById("unknown-test").value};chrome.storage.sync.set(t).then((()=>{(0,e.log)("Popup",e.Level.INFO,"Configuration saved.")}))}(),n()}))})),document.getElementById("reset").onclick=()=>{(0,t.setDefault)().then((()=>{n(),(0,e.log)("Popup",e.Level.INFO,"Configuration reset.")}))}}))}})()})();